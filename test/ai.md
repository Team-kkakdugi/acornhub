# AI ê¸°ëŠ¥ ëª…ì„¸ì„œ (v4.0)

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì— ì ìš©ë  AI ê¸°ëŠ¥ì˜ ì—­í• , ì…/ì¶œë ¥, ê·¸ë¦¬ê³  ì‘ë™ ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.

---

### ğŸ¤– ê¸°ëŠ¥ 1: ìë™ êµ°ì§‘í™” ë° ì¹´í…Œê³ ë¦¬ ëª…ëª…

-   **ëª©í‘œ:** ì €ì¥ëœ ëª¨ë“  ì¹´ë“œë¥¼ ë‚´ìš©ì˜ ìœ ì‚¬ë„ì— ë”°ë¼ ìë™ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ê³ , ê° ê·¸ë£¹ì˜ ì£¼ì œë¥¼ ë‚˜íƒ€ë‚´ëŠ” 'ì¹´í…Œê³ ë¦¬ ì´ë¦„'ì„ ìƒì„±í•©ë‹ˆë‹¤.
-   **ì‚¬ìš© ì‹œì :** ì‚¬ìš©ìê°€ 'ì „ì²´ ì¹´ë“œ ì •ë¦¬'ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•  ë•Œ.

#### API ëª…ì„¸: `POST /cards/cluster`

-   **Request (Go -> Python):**
    ```json
    {
      "cards": [
        { "id": 1, "content": "ì²« ë²ˆì§¸ ì¹´ë“œ ë‚´ìš©..." },
        { "id": 2, "content": "ë‘ ë²ˆì§¸ ì¹´ë“œ ë‚´ìš©..." }
      ]
    }
    ```
-   **Response (Python -> Go):**
    ```json
    {
      "clusters": [
        {
          "category_name": "AI ê¸°ìˆ  ë™í–¥",
          "card_ids": [1, 5]
        },
        {
          "category_name": "ê¸°ì—… ì „ëµ",
          "card_ids": [2]
        }
      ]
    }
    ```

#### ì‘ë™ ë°©ì‹ (Method)

1.  **Go ë°±ì—”ë“œ:** 'ì •ë¦¬' APIê°€ í˜¸ì¶œë˜ë©´, DBì—ì„œ ëª¨ë“  ì¹´ë“œì˜ `id`ì™€ `content_plain`ì„ ì¡°íšŒí•˜ì—¬ `cards` ë°°ì—´ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
2.  **Python API í˜¸ì¶œ:** Go ë°±ì—”ë“œëŠ” ì´ `cards` ë°°ì—´ì„ `POST /cards/cluster` APIì˜ Bodyì— ë‹´ì•„ Python AI ì„œë²„ì— ì „ì†¡í•©ë‹ˆë‹¤.
3.  **Python ì„œë²„ (ë‚´ë¶€ ì²˜ë¦¬):**
    a. **í…ìŠ¤íŠ¸ ë²¡í„°í™”:** **Gemini ì„ë² ë”© API**ë¥¼ í˜¸ì¶œí•˜ì—¬ ìš”ì²­ìœ¼ë¡œ ë°›ì€ ëª¨ë“  ì¹´ë“œ `content`ë¥¼ ê³ ì°¨ì› ë²¡í„°(Vector)ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    b. **ìµœì  K ì°¾ê¸° (ì„ íƒì‚¬í•­):** `scikit-learn`ì˜ 'ì—˜ë³´ìš° ë°©ì‹'ì„ ì‚¬ìš©í•´ ê°€ì¥ ì ì ˆí•œ í´ëŸ¬ìŠ¤í„°(ê·¸ë£¹)ì˜ ê°œìˆ˜ `k`ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
    c. **K-Means í´ëŸ¬ìŠ¤í„°ë§:** `k`ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ ëª¨ë“  ì¹´ë“œ ë²¡í„°ë¥¼ êµ°ì§‘í™”í•©ë‹ˆë‹¤.
    d. **ì¹´í…Œê³ ë¦¬ ëª…ëª… (LLM):** ê° ê·¸ë£¹ì— ì†í•œ ì¹´ë“œë“¤ì˜ `content`ë¥¼ ëª¨ë‘ ëª¨ì•„ `gemini-pro` ëª¨ë¸ì— ì „ë‹¬í•˜ê³ , "ì´ ë‚´ìš©ë“¤ì„ ëŒ€í‘œí•˜ëŠ” ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ 2~3 ë‹¨ì–´ë¡œ ìƒì„±í•´ì¤˜" ë¼ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
    e. **ê²°ê³¼ ì¡°í•©:** LLMìœ¼ë¡œë¶€í„° ë°›ì€ ì¹´í…Œê³ ë¦¬ ì´ë¦„ê³¼, í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ì†í•œ ì¹´ë“œ ID ëª©ë¡ì„ ë§¤ì¹­í•˜ì—¬ ìµœì¢… JSON ì‘ë‹µì„ ìƒì„±í•©ë‹ˆë‹¤.
4.  **Go ë°±ì—”ë“œ:** Python ì„œë²„ë¡œë¶€í„° ë°›ì€ JSON ì‘ë‹µì„ DBì— ì €ì¥í•˜ê±°ë‚˜ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

### ğŸ—ï¸ ê¸°ëŠ¥ 2: AI íƒœê·¸ ìë™ ìƒì„±

-   **ëª©í‘œ:** ì‚¬ìš©ìê°€ ìƒˆ ì¹´ë“œë¥¼ ì €ì¥í•  ë•Œ, ë‚´ìš©ì˜ í•µì‹¬ í‚¤ì›Œë“œë¥¼ ìë™ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ 'íƒœê·¸'ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
-   **ì‚¬ìš© ì‹œì :** ì‚¬ìš©ìê°€ ìƒˆ ì¹´ë“œë¥¼ ì €ì¥í•˜ëŠ” API(`POST /api/clip`)ê°€ í˜¸ì¶œë  ë•Œ.

#### API ëª…ì„¸: `POST /tags/generate`

-   **Request (Go -> Python):**
    ```json
    {
      "content": "ìƒˆë¡œ ì €ì¥ëœ ì¹´ë“œì˜ ë³¸ë¬¸ í…ìŠ¤íŠ¸..."
    }
    ```
-   **Response (Python -> Go):**
    ```json
    {
      "tags": ["AI", "ìì—°ì–´ì²˜ë¦¬", "í¸í–¥ì„± ë¬¸ì œ"]
    }
    ```

#### ì‘ë™ ë°©ì‹ (Method)

1.  **Go ë°±ì—”ë“œ:** ì¹´ë“œ ì €ì¥ APIê°€ í˜¸ì¶œë˜ë©´, ì €ì¥í•  ì¹´ë“œì˜ `content_plain`ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
2.  **Python API í˜¸ì¶œ:** Go ë°±ì—”ë“œëŠ” ì´ `content`ë¥¼ `POST /tags/generate` APIì˜ Bodyì— ë‹´ì•„ Python AI ì„œë²„ì— ì „ì†¡í•©ë‹ˆë‹¤.
3.  **Python ì„œë²„ (ë‚´ë¶€ ì²˜ë¦¬):**
    a. **íƒœê·¸ í›„ë³´ ì¶”ì¶œ (í•˜ì´ë¸Œë¦¬ë“œ):** `konlpy`, `KeyBERT`, `KLUE-NER` ë“± ì—¬ëŸ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì¡°í•©í•˜ì—¬ íƒœê·¸ í›„ë³´ ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
    b. **ìµœì¢… íƒœê·¸ ì„ íƒ (LLM):** ìƒì„±ëœ **'íƒœê·¸ í›„ë³´ ëª©ë¡'**ë§Œì„ `gemini-pro` ëª¨ë¸ì— ë³´ë‚´ê³ , "ì´ í›„ë³´ë“¤ ì¤‘ì—ì„œ í•µì‹¬ íƒœê·¸ 5ê°œë§Œ ê³¨ë¼ ë‹¤ë“¬ì–´ì¤˜"ë¼ê³  ìš”ì²­í•˜ì—¬ ìµœì¢… íƒœê·¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ìŠµë‹ˆë‹¤.
4.  **Python ì„œë²„ëŠ” ìµœì¢… íƒœê·¸ ë¦¬ìŠ¤íŠ¸ë¥¼ Go ë°±ì—”ë“œë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.**
5.  **Go ë°±ì—”ë“œ:** ë°›ì€ `tags` ë¦¬ìŠ¤íŠ¸ë¥¼ DBì— ì €ì¥í•˜ì—¬ ì§€ì‹ ê·¸ë˜í”„ì˜ ë…¸ë“œì™€ ì—£ì§€ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

---

### ğŸ•µï¸ ê¸°ëŠ¥ 3: AI ì—ì´ì „íŠ¸ë¥¼ í†µí•œ ë¬¸ì„œ ì´ˆì•ˆ ì‘ì„± (ë‹¨ìˆœí™” ë²„ì „)

-   **ëª©í‘œ:** ì‚¬ìš©ìê°€ ë¬¸ì„œ ì£¼ì œë¥¼ ì…ë ¥í•˜ë©´, AI ì—ì´ì „íŠ¸ê°€ ìŠ¤ìŠ¤ë¡œ DBì˜ íƒœê·¸ì™€ ì¹´í…Œê³ ë¦¬ë¥¼ ê²€ìƒ‰í•˜ì—¬ ê´€ë ¨ ì¹´ë“œë¥¼ ì°¾ê³ , ê·¸ ë‚´ìš©ì„ ì¢…í•©í•˜ì—¬ ë¬¸ì„œì˜ ì´ˆì•ˆì„ ì‘ì„±í•©ë‹ˆë‹¤.
-   **ì‚¬ìš© ì‹œì :** ì‚¬ìš©ìê°€ 'ê¸€ì“°ê¸°' í˜ì´ì§€ì—ì„œ ì£¼ì œë¥¼ ì…ë ¥í•˜ê³  'AI ì´ˆì•ˆ ì‘ì„±' ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ.

#### API ëª…ì„¸: `POST /agent/invoke`

-   **Request (Go -> Python):**
    ```json
    {
      "topic": "AIì˜ ì•ˆì „ê³¼ ìœ¤ë¦¬",
      "all_tags": ["AI", "ë¹…í…Œí¬", "í¸í–¥ì„±", ...],
      "all_categories": [
        {"category_name": "AI ê¸°ìˆ  ë™í–¥", "card_ids": [1, 5]},
        ...
      ]
    }
    ```
-   **Response (Python -> Go):**
    ```json
    {
      "report": "AIì˜ ì•ˆì „ê³¼ ìœ¤ë¦¬ì— ëŒ€í•œ ë³´ê³ ì„œ ì´ˆì•ˆì…ë‹ˆë‹¤. ì œê°€ ì°¾ì€ ìë£Œì— ë”°ë¥´ë©´..."
    }
    ```

#### ì‘ë™ ë°©ì‹ (Method)

ì´ ê¸°ëŠ¥ì€ Python ì„œë²„ê°€ **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°(Orchestrator)**ê°€ ë˜ì–´ LLMê³¼ Go ë°±ì—”ë“œ ì‚¬ì´ì˜ ìƒí˜¸ì‘ìš©ì„ ì¡°ìœ¨í•©ë‹ˆë‹¤.

1.  **Go ë°±ì—”ë“œ (ì‹œì‘):**
    a. ì‚¬ìš©ìê°€ 'AI ì´ˆì•ˆ ì‘ì„±'ì„ ìš”ì²­í•˜ë©´, Go ë°±ì—”ë“œëŠ” DBì—ì„œ **ëª¨ë“  íƒœê·¸ ëª©ë¡**ê³¼ **ëª¨ë“  ì¹´í…Œê³ ë¦¬ ì •ë³´**ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    b. ì´ ì •ë³´ë“¤ì„ ì‚¬ìš©ìì˜ `topic`ê³¼ í•¨ê»˜ `POST /agent/invoke` APIë¥¼ í†µí•´ Python AI ì„œë²„ì— ì „ë‹¬í•©ë‹ˆë‹¤.

2.  **Python ì„œë²„ (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë£¨í”„):**
    a. **ì´ˆê¸° í”„ë¡¬í”„íŠ¸ êµ¬ì„±:** Python ì„œë²„ëŠ” ì „ë‹¬ë°›ì€ `topic`, `all_tags`, `all_categories`ì™€ í•¨ê»˜, **Claude Sonnet 4.5** ëª¨ë¸ì—ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” **ë„êµ¬(Function) ëª©ë¡**ì„ ì•Œë ¤ì£¼ë©° ì²« ì§ˆë¬¸ì„ ë˜ì§‘ë‹ˆë‹¤.
    b. **LLMì˜ ë„êµ¬ í˜¸ì¶œ ìš”ì²­:** LLMì€ ì£¼ì–´ì§„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•„ìš”í•œ ì •ë³´ë¥¼ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê³ , ë¯¸ë¦¬ ì •ì˜ëœ ë„êµ¬(í•¨ìˆ˜)ë¥¼ í˜¸ì¶œí•´ë‹¬ë¼ê³  Python ì„œë²„ì— ìš”ì²­í•©ë‹ˆë‹¤.
        -   *LLMì˜ ìƒê° ì˜ˆì‹œ: "'AI ìœ¤ë¦¬' íƒœê·¸ì™€ 'AI ê¸°ìˆ  ë™í–¥' ì¹´í…Œê³ ë¦¬ê°€ ì£¼ì œì™€ ê´€ë ¨ ê¹Šì–´ ë³´ì´ë‹ˆ, ê´€ë ¨ëœ ì¹´ë“œë“¤ì„ ì°¾ì•„ë³´ì." -> `search_cards(tags=["AI ìœ¤ë¦¬"], categories=["AI ê¸°ìˆ  ë™í–¥"])` í˜¸ì¶œ ìš”ì²­*
    c. **Go ë°±ì—”ë“œì— ë°ì´í„° ì¬ìš”ì²­:** Python ì„œë²„ëŠ” LLMì˜ ë„êµ¬ í˜¸ì¶œì„ í•´ì„í•˜ê³ , ê·¸ì— ë§ëŠ” APIë¥¼ Go ë°±ì—”ë“œì— ë‹¤ì‹œ í˜¸ì¶œí•˜ì—¬ **ì¹´ë“œì˜ ì „ì²´ ë³¸ë¬¸ ëª©ë¡**ì„ ë°›ì•„ì˜µë‹ˆë‹¤.
    d. **ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ ë° ì •ë³´ ì œê³µ:** Python ì„œë²„ëŠ” Goë¡œë¶€í„° ë°›ì€ ì¹´ë“œ ë³¸ë¬¸ë“¤ì„ LLMì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ë•Œ, **ëˆ„ì ëœ ëŒ€í™” ë° ë°ì´í„°ì˜ ì´ëŸ‰ì´ LLMì˜ ì»¨í…ìŠ¤íŠ¸ ì°½ì˜ 20%ë¥¼ ë„˜ì§€ ì•Šë„ë¡** ì˜¤ë˜ëœ ì •ë³´ë¥¼ ìš”ì•½í•˜ê±°ë‚˜ ì˜ë¼ë‚´ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    e. **ë°˜ë³µ ë˜ëŠ” ì¢…ë£Œ:** LLMì€ ìƒˆë¡œ ì–»ì€ ì •ë³´ë¥¼ ë³´ê³ , ì¶”ê°€ ì •ë³´ê°€ ë” í•„ìš”í•˜ë©´ b~d ê³¼ì •ì„ ë°˜ë³µí•©ë‹ˆë‹¤. ì •ë³´ê°€ ì¶©ë¶„í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´, ë£¨í”„ë¥¼ ì¢…ë£Œí•˜ê³  ìµœì¢… ê¸€ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤.
    f. **ìµœì¢… ê¸€ ìƒì„± ë° ë°˜í™˜:** LLMì´ ìˆ˜ì§‘í•œ ëª¨ë“  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ `topic`ì— ëŒ€í•œ ê¸€ì˜ ì´ˆì•ˆì„ ì‘ì„±í•˜ë©´, Python ì„œë²„ëŠ” ì´ `report`ë¥¼ Go ë°±ì—”ë“œì— ìµœì¢… ì‘ë‹µìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

3.  **LLMì´ Python ì„œë²„ ë‚´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬ ëª©ë¡:**
    -   `search_cards(tags: list[str], categories: list[str]) -> list[card_content]`